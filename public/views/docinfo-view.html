<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="/bower_components/paper-input/paper-textarea.html">
<link rel="import" href="/bower_components/polymerfire/firebase-document.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">
<link rel="import" href="/bower_components/gold-email-input/gold-email-input.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="/bower_components/iron-media-query/iron-media-query.html">

<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-icons/device-icons.html">

<link rel="import" href="/styles/input-styles.html">
<link rel="import" href="/styles/layout-styles.html">
<link rel="import" href="/styles/button-styles.html">

<dom-module id="docinfo-view">
    <template>
        <style include="button-styles layout-styles input-styles">
            :host {
                display: block;
            }

            .green {
                background-color: var(--app-green-color);
                color: #fff !important;
            }

            .blue {
                background-color: var(--app-accent-color);
                color: #fff !important;
            }

            .grey {
                background-color: #fafafb;
                border-top: 1px solid #e7e7e8;
                border-bottom: 1px solid #e7e7e8;
            }

            a {
                text-decoration: none;
            }

            h1 {
                letter-spacing: 0.02em;
            }

            .main-frame {
                max-width: 1200px;
                font-weight: lighter;
                padding: 0;
                color: #252526;
                margin: 2em auto;
            }

            .grid section {
                padding: 5%;
                margin: 0 !important;
                position: relative;
            }

            section > p {
                font-size: 1.15em;
                line-height: 1.65em;
            }

            section > h1 {
                font-size: 1.6em;
                margin-top: 0;
            }

            img {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                margin: auto;
                max-width: 250px;
                max-height: 250px;
            }

            #patient-image {
                max-width: 150px;
            }

            #comp-img {
                margin-left: 0;
                margin-bottom: 0;
                max-width: 480px;
                max-height: 480px;
            }

            .img-section {
                text-align: center;
            }

            #office-presence-section a {
                font-weight: bold;
                background-color: var(--app-green-color);
                color: #fff;
                padding: 0.5em 1em;
                border-radius: 1em;
            }

            #office-registration {
                background-color: var(--app-accent-color);
                color: #fff;
                padding: 5%;
                margin-top: 4em;
            }

            #office-registration * {
                color: #fff;
            }

            #office-registration section {
                text-align: center;
                padding-top: 0;
                padding-bottom: 2em;
            }

            #office-registration section:first-child {
                border-right: 2px solid #374C80;
            }

            #office-registration h1 {
                text-align: center;
                margin-bottom: 3em;
            }

            #office-registration h2 {
                font-size: 1.5em;
                letter-spacing: 0.02em;
                margin-top: 0.5em;
            }

            #office-registration paper-button {
                padding: 1.2em 2em;
                letter-spacing: 0.08em;
                font-weight: bold;
            }

            #question-container {
                background-color: #fbfbfc;
                padding: 3em;
            }

            #question-container h2 {
                font-size: 1.5em;
                letter-spacing: 0.02em;
                margin-top: 0.5em;
            }

            form {
                max-width: 500px;
                margin: 0 auto;
            }

            #first-square-section {
                margin-bottom: 0;
            }

            #last-presentation-section {
                margin-top: 0;
            }

            /*** PRICE ***/

            .price-section {
                max-width: 750px;
                text-align: center;
            }

            .features-section {
                max-width: 18em;
                margin: 0 auto;
                text-align: left;
                font-size: 1.2em;
                font-weight: bold;
            }

            .features-section > div {
                margin: 0.8em 0;
            }

            #free-section {
                color: var(--app-green-color);
            }

            #free-section .price-header {
                padding: 1em 0;
                color: var(--app-green-color);
            }

            #paid-section {
                border-left: 1px solid #e0e0e1;
                color: var(--app-accent-color);
            }

            .price-header {
                text-align: center;
                font-size: 1.5em;
                letter-spacing: 0.03em;
                font-weight: bold;
                padding: 0.5em 1em;
                max-width: 11em;
                margin: 0 auto 1.8em auto;
                border-radius: 4em;
            }

            .price-header .description {
                font-size: 0.7em;
                margin-top: 0.2em;
                font-weight: lighter;
            }

            #pricing-headline-section {
                padding: 0 5% 2em 5%;
                max-width: 900px;
                margin-top: 6em;
                margin-bottom: 0;
            }

            #pricing-detail {
                max-width: 600px;
                margin: 4em auto 0 auto;
                padding: 0 5%;
                color: #8a8a8b;
            }

            .more-info {
                margin-top: 3.2em;
                font-weight: bold;
                color: #bcbcbd;
                letter-spacing: 0.03em;
                cursor: pointer;
            }

            .more-info:hover {
                text-decoration: underline;
            }

            .more-info iron-icon {
                margin-right: 0.5em;
                margin-top: -2px;
            }

            /******************************/

            @media (max-width: 980px) {
                #comp-img {
                    max-width: 350px;
                    max-height: 350px;
                }
            }

            @media (max-width: 716px) {

                .grid section {
                    padding: 7% 5%;
                }

                img {
                    position: static;
                    max-width: 150px;
                    max-height: 150px;
                }

                #office-registration section:first-child {
                    border-right: none;
                    padding-bottom: 4em;
                    border-bottom: 2px solid #374C80;
                }

                #office-registration section:nth-child(2) {
                    padding-top: 4em;
                }

                #office-registration h1 {
                    margin-bottom: 1em;;
                }

                #paid-section {
                    border-left: none;
                    border-top: 1px solid #dededf;
                }

                .price-section {
                    font-size: 0.9em;
                }
            }


        </style>

        <iron-media-query query="max-width:716px" query-matches="{{smallScreen}}"></iron-media-query>

        <firebase-document id="docinfo_document" app-name="doctor-appointment-system">
        </firebase-document>

        <section class="main-frame grid">
            <section>
                <h1>Co je Docta?</h1>
                <p>Docta je systém, jehož cílem je propojit lékaře s pacienty a ulehčit tak lékařům každodenní
                    práci v ordinaci. Jako lékař si můžete zaregistrovat svou ordinaci, která bude veřejně k zobrazení
                    na
                    našich stránkách. Rovněž budete mít přístup k rozhraní ordinace, kde budete mít kompletní přehled o
                    svých pacientech.
                </p>
            </section>
            <section class="img-section">
                <img src="../images/logo.png">
            </section>
        </section>

        <section class="main-frame grid grey">
            <section class="img-section" hidden="[[smallScreen]]">
                <img id="comp-img" src="../images/computer.png">
            </section>
            <section id="office-presence-section">
                <h1>Zdarma prezentujte svoji ordinaci </h1>
                <p>Docta nabízí lékařům prezentovat veškeré informace o jejich ordinacích na internetu zcela zdarma
                    napořád.
                    Navíc máte možnost zdarma využít elektronický kalendář, kam si můžete zapisovat objednané pacienty.
                    <br>
                    <br>
                    <a href="#">Zobrazit ukázkový profil</a>
                </p>
            </section>
        </section>

        <section class="main-frame grid">
            <section>
                <h1>Přenechte objednání pacientům</h1>
                <p>Šetřete svůj čas a přenechte objednání pacientům. V nastavení ordinace si budete moci určit ordinační
                    hodiny a časové rozestupy mezi jednotlivými
                    návštěvami, na základě toho vám vytvoříme kalendář s objednávacími časy.
                </p>
            </section>
            <section class="img-section">
                <img id="patient-image" src="../images/patient.png">
            </section>
        </section>

        <section class="main-frame grid" id="first-square-section">
            <section class="blue">
                <h1>Jen pacienti, které chcete</h1>
                <p>Nemusíte mít strach, že se k vám bude objednávat kde kdo. Máte možnost si vybrat, jací pacienti se u
                    vás mohou objednat. U každého pacienta uvidíte údaje potřebné k jeho jednoznačné identifikaci. Také
                    můžete upozornit pacienty na to, zda přijímáte nové pacienty či
                    nikoli.</p>
            </section>
            <section class="grey">
                <h1>Mějte přehled</h1>
                <p>K dispozici máte elektronický kalendář, kde vidíte všechny objednané pacienty. Samozřejmě máte
                    možnost
                    objednat i pacienty, kteří se vám ozvou po telefonu. </p>
            </section>
        </section>


        <section class="main-frame grid" id="last-presentation-section">
            <section class="grey">
                <h1>Komunikujte s pacienty</h1>
                <p>Potřebujete poslat pacientovi zprávu, anebo provést online konzultaci? Komunikace mezi lékařem a
                    pacientem je plně zakomponována do našeho systému. </p>
            </section>
            <section class="green">
                <h1>Ovládejte odkudkoli</h1>
                <p>Celý systém je online a plně responzivní, což znamená, že je snadno ovladatelný jak z počítače, tak
                    telefonu nebo tabletu. Vše můžete mít pod kontrolou všude tam, kde je připojení k internetu.</p>
            </section>
        </section>


        <section class="main-frame" id="pricing-headline-section">
            <h1>Platíte jen za to, co využijete</h1>
            <p>U nás neplatíte žádné paušály, zaplatíte pouze za dny, kdy využijete našich prémiových služeb.
                Pokud budete na dovolené a nebudete v ordinaci, nic vám účtovat nebudeme.
            </p>
        </section>

        <section class="main-frame grid">
            <section id="free-section" class="price-section">
                <div class="green price-header">ZDARMA</div>
                <div class="features-section">
                    <div>*&nbsp; Kompletní prezentace ordinace</div>
                    <div>*&nbsp; Elektroniký kalendář</div>
                    <div>*&nbsp; Komunikace mezi lékaři</div>
                    <div>*&nbsp; 1. měsíc online objednání</div>
                </div>
                <div class="more-info">
                    <iron-icon icon="icons:help"></iron-icon>
                    Více informací
                </div>
            </section>
            <section id="paid-section" class="price-section">
                <div class="blue price-header">+ 20 Kč
                    <div class="description">za den online objednávání</div>
                </div>
                <div class="features-section">
                    <div>+ Neomezeně objednávacích časů</div>
                    <div>+ Databáze objednaných pacientů</div>
                    <div>+ Komunikace s pacienty v databázi</div>
                    <div hidden="[[smallScreen]]">&nbsp;</div>
                </div>
                <div class="more-info">
                    <iron-icon icon="icons:help"></iron-icon>
                    Více informací
                </div>
            </section>
        </section>


        <section id="pricing-detail">Pokud v registraci ordinace zvolíte možnost online objednání, tak je cena účtována
            měsíčně podle toho,
            na kolik dnů se za poslední měsíc bylo možné objednat online.
        </section>

        <div id="office-registration">
            <h1>Jak zaregistruji svoji ordinaci?</h1>
            <section class="grid main-frame">
                <section id="no-account-section">
                    <h2>Ještě nemáte žádný účet?</h2>
                    <a href="/registration">
                        <paper-button raised>Založte si účet</paper-button>
                    </a>
                    <p>Po registraci obdržíte email, který vás navede na registraci vaší ordinace.
                    </p>
                </section>
                <section>
                    <h2>Už máte účet?</h2>
                    <a href="/office/registration/first">
                        <paper-button raised>Zaregistrujte ordinaci</paper-button>
                    </a>
                </section>
            </section>
        </div>

        <div id="question-container">
            <form>
                <h2>Máte nějaký dotaz? Zeptejte se nás.</h2>
                <gold-email-input id="email_input" error-message="Špatný formát" value="{{email}}"
                                  label="Vaše emailová adresa" auto-validate required
                                  invalid="{{invalidEmail}}">
                </gold-email-input>
                <paper-textarea auto-validate required id="message_input" label="Vaše zpráva"
                                invalid="{{invalidMessage}}" char-counter
                                maxlength="2000"></paper-textarea>
                <paper-button raised on-tap="sendQuestion">Odeslat</paper-button>
            </form>
        </div>
    </template>

    <script>
        Polymer({
            is: 'docinfo-view',

            sendQuestion: function () {

                var message = this.$.message_input.value,
                    db = this.$.docinfo_document.app.database();

                db.ref('/docInfoQuestions/').push({
                    "email": this.email,
                    "message": message
                }).then(function () {
                    this.fire("show-toast", {text: "Zpráva odeslána"});
                }.bind(this), function () {
                    this.fire("show-dialog", {
                        path: "", viewName: "genericdialog", open: true,
                        data: {
                            text: 'Při ukládání dat se vyskytla chyba. Zkuste to prosím znovu.',
                            buttonText: 'Zavřít'
                        }
                    });
                }.bind(this));
            }
        });
    </script>
</dom-module>
